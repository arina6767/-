from aiogram import Bot, Dispatcher, executor, types
import random

# Ğ¢Ğ¾ĞºĞµĞ½ Ğ±Ğ¾Ñ‚Ğ° (Ğ·Ğ°Ğ¼ĞµĞ½Ğ¸ Ğ½Ğ° ÑĞ²Ğ¾Ğ¹)
TOKEN = "8564961413:AAFNCBFsA-iloUx"

bot = Bot(token=TOKEN)
dp = Dispatcher(bot)

user_scores = {}
user_state = {}

# Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ¾ ÑÑ‚Ñ€Ğ°Ğ½Ğ°Ğ¼, ÑÑ„ĞµÑ€Ğ°Ğ¼ Ğ¸ Ğ½Ğ°Ğ»Ğ¾Ğ³Ğ°Ğ¼
tax_data = {
    "Ğ˜Ñ‚Ğ°Ğ»Ğ¸Ñ": {
        "Ğ¢ÑƒÑ€Ğ¸Ğ·Ğ¼": {
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ„Ğ»Ğ°Ğ³Ğ° Ğ˜Ñ‚Ğ°Ğ»Ğ¸Ğ¸ Ğ² Ğ´ĞµĞºĞ¾Ñ€Ğµ": 0,
            "Ğ¢ÑƒÑ€Ğ¸ÑÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑĞ±Ğ¾Ñ€ Ğ·Ğ° Ğ¿Ñ€Ğ¾Ğ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ": 2,
            "Ğ¡Ğ±Ğ¾Ñ€ Ğ·Ğ° Ğ²Ñ…Ğ¾Ğ´ Ğ² Ğ¿ĞµÑ€ĞµĞ³Ñ€ÑƒĞ¶ĞµĞ½Ğ½Ñ‹Ğµ Ñ€Ğ°Ğ¹Ğ¾Ğ½Ñ‹": 5,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ñ†ĞµĞ½Ñ‚Ñ€Ğ°": 8
        },
        "Ğ­ĞºĞ¾Ğ»Ğ¾Ğ³Ğ¸Ñ": {
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ¾Ğ´Ğ½Ğ¾Ñ€Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ ÑÑ‚Ğ°ĞºĞ°Ğ½Ñ‡Ğ¸ĞºĞ¸": 0,
            "Ğ¡Ğ±Ğ¾Ñ€ Ğ·Ğ° Ğ¿Ğ»Ğ°ÑÑ‚Ğ¸ĞºĞ¾Ğ²Ñ‹Ğµ Ğ±ÑƒÑ‚Ñ‹Ğ»ĞºĞ¸": 2,
            "Ğ¡Ğ±Ğ¾Ñ€ Ğ·Ğ° Ğ¿ĞµÑ€ĞµÑ€Ğ°Ğ±Ğ¾Ñ‚ĞºÑƒ Ğ¾Ñ‚Ñ…Ğ¾Ğ´Ğ¾Ğ²": 5,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ²ÑŠĞµĞ·Ğ´ Ğ°Ğ²Ñ‚Ğ¾ Ğ² Ñ†ĞµĞ½Ñ‚Ñ€ Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ°": 8
        },
        "ĞœĞµĞ´Ğ¸Ñ†Ğ¸Ğ½Ğ°": {
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ¿Ğ¾ĞºÑƒĞ¿ĞºÑƒ Ğ²Ğ¸Ñ‚Ğ°Ğ¼Ğ¸Ğ½Ğ¾Ğ² Ñ‚ÑƒÑ€Ğ¸ÑÑ‚Ğ°Ğ¼Ğ¸": 0,
            "Ğ¡Ğ±Ğ¾Ñ€ Ğ½Ğ° Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºÑƒ Ğ¼ĞµÑÑ‚Ğ½Ñ‹Ñ… ĞºĞ»Ğ¸Ğ½Ğ¸Ğº": 2,
            "Ğ¡Ğ±Ğ¾Ñ€ Ğ½Ğ° Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ğ°ĞºÑ‚Ğ¸ĞºÑƒ Ğ·Ğ°Ğ±Ğ¾Ğ»ĞµĞ²Ğ°Ğ½Ğ¸Ğ¹": 5,
            "ĞĞ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ¼ĞµĞ´ÑĞ±Ğ¾Ñ€ Ğ´Ğ»Ñ Ñ‚ÑƒÑ€Ğ¸ÑÑ‚Ğ¾Ğ²": 8
        },
        "Ğ¡Ğ¾Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑÑ„ĞµÑ€Ğ°": {
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° ÑƒĞ»Ğ¸Ñ‡Ğ½Ñ‹Ñ… Ğ¼ÑƒĞ·Ñ‹ĞºĞ°Ğ½Ñ‚Ğ¾Ğ²": 0,
            "Ğ¡Ğ±Ğ¾Ñ€ Ğ·Ğ° Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ğ»Ñ Ğ² Ñ‚ÑƒÑ€Ğ¸ÑÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ¼ĞµÑÑ‚Ğ°Ñ…": 2,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ±Ğ¸Ğ·Ğ½ĞµÑ Ğ² Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ñ€Ğ°Ğ¹Ğ¾Ğ½Ğ°Ñ…": 5,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° ĞºĞ¾Ğ¼Ğ¼ĞµÑ€Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²": 8
        }
    },

    "Ğ¯Ğ¿Ğ¾Ğ½Ğ¸Ñ": {
        "Ğ¢ÑƒÑ€Ğ¸Ğ·Ğ¼": {
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ñ„Ğ¾Ñ‚Ğ¾ Ğ² Ğ¼ĞµÑ‚Ñ€Ğ¾": 0,
            "Ğ¢ÑƒÑ€Ğ¸ÑÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑĞ±Ğ¾Ñ€ Ğ² Ğ¾Ñ‚ĞµĞ»ÑÑ…": 2,
            "Ğ¡Ğ±Ğ¾Ñ€ Ğ½Ğ° ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ğµ Ñ…Ñ€Ğ°Ğ¼Ğ¾Ğ²": 5,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ¿Ğ¾ÑĞµÑ‰ĞµĞ½Ğ¸Ğµ Ğ¿ĞµÑ€ĞµĞ³Ñ€ÑƒĞ¶ĞµĞ½Ğ½Ñ‹Ñ… Ğ·Ğ¾Ğ½": 8
        },
        "Ğ­ĞºĞ¾Ğ»Ğ¾Ğ³Ğ¸Ñ": {
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ¿Ğ»Ğ°ÑÑ‚Ğ¸ĞºĞ¾Ğ²Ñ‹Ğµ Ğ¿Ğ°ĞºĞµÑ‚Ñ‹": 0,
            "Ğ¡Ğ±Ğ¾Ñ€ Ğ·Ğ° ÑƒĞ¿Ğ°ĞºĞ¾Ğ²ĞºÑƒ": 2,
            "Ğ¡Ğ±Ğ¾Ñ€ Ğ·Ğ° Ğ¿ĞµÑ€ĞµÑ€Ğ°Ğ±Ğ¾Ñ‚ĞºÑƒ ÑĞ»ĞµĞºÑ‚Ñ€Ğ¾Ğ½Ğ¸ĞºĞ¸": 5,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ¿Ñ€ĞµĞ²Ñ‹ÑˆĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ»ĞµĞ½Ğ¸Ñ ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸": 8
        },
        "ĞœĞµĞ´Ğ¸Ñ†Ğ¸Ğ½Ğ°": {
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° ÑĞ»Ğ°Ğ´Ğ¾ÑÑ‚Ğ¸": 0,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° ÑĞ»Ğ°Ğ´ĞºĞ¸Ğµ Ğ½Ğ°Ğ¿Ğ¸Ñ‚ĞºĞ¸": 2,
            "Ğ¡Ğ±Ğ¾Ñ€ Ğ½Ğ° Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ğ°ĞºÑ‚Ğ¸ĞºÑƒ Ğ·Ğ°Ğ±Ğ¾Ğ»ĞµĞ²Ğ°Ğ½Ğ¸Ğ¹": 5,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ²Ñ€ĞµĞ´Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ñ‹": 8
        },
        "Ğ¡Ğ¾Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑÑ„ĞµÑ€Ğ°": {
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ¿Ğ¾Ğ·Ğ´Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ³ÑƒĞ»ĞºĞ¸": 0,
            "Ğ¡Ğ±Ğ¾Ñ€ Ğ·Ğ° ÑˆÑƒĞ¼ Ğ½Ğ¾Ñ‡ÑŒÑ": 2,
            "Ğ¡Ğ±Ğ¾Ñ€ Ñ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹ Ğ·Ğ° Ğ¿ĞµÑ€ĞµÑ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸": 5,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ·Ğ° Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ° Ñ‚Ñ€ÑƒĞ´Ğ° Ğ¸ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°": 8
        }
    },

    "Ğ¡Ğ¨Ğ": {
        "Ğ¢ÑƒÑ€Ğ¸Ğ·Ğ¼": {
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° ÑĞµĞ»Ñ„Ğ¸ Ğ² Ğ¿Ğ°Ñ€ĞºĞµ": 0,
            "Ğ¡Ğ±Ğ¾Ñ€ Ğ·Ğ° Ğ¿Ğ°Ñ€ĞºĞ¾Ğ²ĞºÑƒ Ñƒ Ğ´Ğ¾ÑÑ‚Ğ¾Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ĞµĞ¹": 2,
            "Ğ¢ÑƒÑ€Ğ¸ÑÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑĞ±Ğ¾Ñ€ Ğ² Ğ¾Ñ‚ĞµĞ»ÑÑ…": 5,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ¿Ğ¾ÑĞµÑ‰ĞµĞ½Ğ¸Ğµ Ğ½Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ¿Ğ°Ñ€ĞºĞ¾Ğ²": 8
        },
        "Ğ­ĞºĞ¾Ğ»Ğ¾Ğ³Ğ¸Ñ": {
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ¿Ğ»Ğ°ÑÑ‚Ğ¸ĞºĞ¾Ğ²Ñ‹Ğµ Ñ‚Ñ€ÑƒĞ±Ğ¾Ñ‡ĞºĞ¸": 0,
            "Ğ¡Ğ±Ğ¾Ñ€ Ğ·Ğ° Ğ²Ñ‹Ğ²Ğ¾Ğ· Ğ¼ÑƒÑĞ¾Ñ€Ğ°": 2,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ²Ñ‹Ğ±Ñ€Ğ¾ÑÑ‹ Ğ¿Ñ€ĞµĞ´Ğ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğ¹": 5,
            "Ğ£Ğ³Ğ»ĞµÑ€Ğ¾Ğ´Ğ½Ñ‹Ğ¹ Ğ½Ğ°Ğ»Ğ¾Ğ³": 8
        },
        "ĞœĞµĞ´Ğ¸Ñ†Ğ¸Ğ½Ğ°": {
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ñ„Ğ°ÑÑ‚Ñ„ÑƒĞ´": 0,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° ÑĞ»Ğ°Ğ´ĞºĞ¸Ğµ Ğ½Ğ°Ğ¿Ğ¸Ñ‚ĞºĞ¸": 2,
            "Ğ¡Ğ±Ğ¾Ñ€ Ğ½Ğ° Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ğ°ĞºÑ‚Ğ¸ĞºÑƒ Ğ¾Ğ¶Ğ¸Ñ€ĞµĞ½Ğ¸Ñ": 5,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° ÑƒĞ»ÑŒÑ‚Ñ€Ğ°Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ½Ğ½ÑƒÑ Ğ¿Ğ¸Ñ‰Ñƒ": 8
        },
        "Ğ¡Ğ¾Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑÑ„ĞµÑ€Ğ°": {
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ñ€ĞµĞºĞ»Ğ°Ğ¼Ñƒ": 0,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° ÑĞ¾Ñ†ÑĞµÑ‚Ğ¸": 2,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ¿ÑƒÑÑ‚ÑƒÑÑ‰ĞµĞµ Ğ¶Ğ¸Ğ»ÑŒÑ‘": 5,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° ÑĞ¿ĞµĞºÑƒĞ»ÑÑ†Ğ¸Ñ Ğ½ĞµĞ´Ğ²Ğ¸Ğ¶Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒÑ": 8
        }
    },

    "Ğ¤Ñ€Ğ°Ğ½Ñ†Ğ¸Ñ": {
        "Ğ¢ÑƒÑ€Ğ¸Ğ·Ğ¼": {
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ñ„Ğ¾Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑƒĞ»Ğ¸Ñ†": 0,
            "Ğ¢ÑƒÑ€Ğ¸ÑÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑĞ±Ğ¾Ñ€ Ğ·Ğ° Ğ¼ÑƒĞ·ĞµĞ¸": 2,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ¿Ñ€Ğ¾Ğ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² Ğ¾Ñ‚ĞµĞ»ÑÑ…": 5,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ°Ğ²Ğ¸Ğ°Ğ¿ĞµÑ€ĞµĞ»Ñ‘Ñ‚Ñ‹ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ ÑÑ‚Ñ€Ğ°Ğ½Ñ‹": 8
        },
        "Ğ­ĞºĞ¾Ğ»Ğ¾Ğ³Ğ¸Ñ": {
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ¿Ğ»Ğ°ÑÑ‚Ğ¸ĞºĞ¾Ğ²Ñ‹Ğµ Ğ¿Ğ°ĞºĞµÑ‚Ñ‹": 0,
            "Ğ¡Ğ±Ğ¾Ñ€ Ğ·Ğ° Ğ¿ĞµÑ€ĞµÑ€Ğ°Ğ±Ğ¾Ñ‚ĞºÑƒ Ğ¾Ñ‚Ñ…Ğ¾Ğ´Ğ¾Ğ²": 2,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ²ÑŠĞµĞ·Ğ´ Ğ°Ğ²Ñ‚Ğ¾ Ğ² Ñ†ĞµĞ½Ñ‚Ñ€": 5,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ·Ğ°Ğ³Ñ€ÑĞ·Ğ½ĞµĞ½Ğ¸Ğµ Ğ²Ğ¾Ğ·Ğ´ÑƒÑ…Ğ°": 8
        },
        "ĞœĞµĞ´Ğ¸Ñ†Ğ¸Ğ½Ğ°": {
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° ÑĞ»Ğ°Ğ´Ğ¾ÑÑ‚Ğ¸": 0,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° ÑĞ»Ğ°Ğ´ĞºĞ¸Ğµ Ğ½Ğ°Ğ¿Ğ¸Ñ‚ĞºĞ¸": 2,
            "Ğ¡Ğ±Ğ¾Ñ€ Ğ½Ğ° Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ğ°ĞºÑ‚Ğ¸ĞºÑƒ Ğ·Ğ°Ğ±Ğ¾Ğ»ĞµĞ²Ğ°Ğ½Ğ¸Ğ¹": 5,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ²Ñ€ĞµĞ´Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ñ‹": 8
        },
        "Ğ¡Ğ¾Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑÑ„ĞµÑ€Ğ°": {
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ¼Ğ¾Ğ´Ğ½ÑƒÑ Ğ¾Ğ´ĞµĞ¶Ğ´Ñƒ": 0,
            "Ğ¡Ğ±Ğ¾Ñ€ Ğ½Ğ° Ğ¼ĞµÑ€Ğ¾Ğ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ñ": 2,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ±Ğ¸Ğ·Ğ½ĞµÑ Ğ² Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ñ€Ğ°Ğ¹Ğ¾Ğ½Ğ°Ñ…": 5,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ¿ÑƒÑÑ‚ÑƒÑÑ‰ĞµĞµ Ğ¶Ğ¸Ğ»ÑŒÑ‘": 8
        }
    },

    "ĞšĞ¸Ñ‚Ğ°Ğ¹": {
        "Ğ¢ÑƒÑ€Ğ¸Ğ·Ğ¼": {
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ñ„Ğ¾Ñ‚Ğ¾ Ñ‚ÑƒÑ€Ğ¸ÑÑ‚Ğ¾Ğ²": 0,
            "Ğ¢ÑƒÑ€Ğ¸ÑÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑĞ±Ğ¾Ñ€": 2,
            "Ğ¡Ğ±Ğ¾Ñ€ Ğ·Ğ° Ğ¿Ğ¾ÑĞµÑ‰ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ñ‹Ñ… Ğ·Ğ¾Ğ½": 5,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ¼Ğ°ÑÑĞ¾Ğ²Ñ‹Ğµ Ñ‚ÑƒÑ€Ğ¸ÑÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹": 8
        },
        "Ğ­ĞºĞ¾Ğ»Ğ¾Ğ³Ğ¸Ñ": {
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° ÑƒĞ¿Ğ°ĞºĞ¾Ğ²ĞºÑƒ": 0,
            "Ğ¡Ğ±Ğ¾Ñ€ Ğ·Ğ° Ğ¿ĞµÑ€ĞµÑ€Ğ°Ğ±Ğ¾Ñ‚ĞºÑƒ Ğ¾Ñ‚Ñ…Ğ¾Ğ´Ğ¾Ğ²": 2,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ²Ñ‹Ğ±Ñ€Ğ¾ÑÑ‹ Ğ¿Ñ€ĞµĞ´Ğ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğ¹": 5,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ¿Ñ€Ğ¾Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ½Ğ¾Ğµ Ğ·Ğ°Ğ³Ñ€ÑĞ·Ğ½ĞµĞ½Ğ¸Ğµ": 8
        },
        "ĞœĞµĞ´Ğ¸Ñ†Ğ¸Ğ½Ğ°": {
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° ÑĞ»Ğ°Ğ´Ğ¾ÑÑ‚Ğ¸": 0,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° ÑĞ»Ğ°Ğ´ĞºĞ¸Ğµ Ğ½Ğ°Ğ¿Ğ¸Ñ‚ĞºĞ¸": 2,
            "Ğ¡Ğ±Ğ¾Ñ€ Ğ½Ğ° Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ğ°ĞºÑ‚Ğ¸ĞºÑƒ Ğ·Ğ°Ğ±Ğ¾Ğ»ĞµĞ²Ğ°Ğ½Ğ¸Ğ¹": 5,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ²Ñ€ĞµĞ´Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ²Ñ‹Ñ‡ĞºĞ¸": 8
        },
        "Ğ¡Ğ¾Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑÑ„ĞµÑ€Ğ°": {
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ½Ğ¾Ñ‡Ğ½Ñ‹Ğµ Ñ€Ğ°Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ñ": 0,
            "Ğ¡Ğ±Ğ¾Ñ€ Ğ½Ğ° Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº Ğ² Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğµ": 2,
            "Ğ¡Ğ±Ğ¾Ñ€ Ğ·Ğ° Ğ¿ĞµÑ€ĞµĞ½Ğ°ÑĞµĞ»Ñ‘Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¼ĞµĞ³Ğ°Ğ¿Ğ¾Ğ»Ğ¸ÑĞ°": 5,
            "ĞĞ°Ğ»Ğ¾Ğ³ Ğ½Ğ° Ğ¿ĞµÑ€ĞµĞ³Ñ€ÑƒĞ· Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹": 8
        }
    }
}

# Ğ‘Ğ¾Ğ½ÑƒÑĞ½Ñ‹Ğµ ĞºĞ¾Ğ´Ñ‹
bonus_codes = [
    "LIT2S9KGJH9",
    "LIT2Sbmkjh",
    "CLASSIC35vx52p",
    "promokodi30j",
    "PROKACHAYSYA"
]

# ĞšĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñ‹
def countries_keyboard():
    kb = types.ReplyKeyboardMarkup(resize_keyboard=True)
    kb.add("Ğ˜Ñ‚Ğ°Ğ»Ğ¸Ñ", "Ğ¯Ğ¿Ğ¾Ğ½Ğ¸Ñ")
    kb.add("Ğ¡Ğ¨Ğ", "Ğ¤Ñ€Ğ°Ğ½Ñ†Ğ¸Ñ", "ĞšĞ¸Ñ‚Ğ°Ğ¹")
    kb.add("ğŸ“Š ĞœĞ¾Ğ¸ Ğ±Ğ°Ğ»Ğ»Ñ‹")
    return kb

def sectors_keyboard():
    kb = types.ReplyKeyboardMarkup(resize_keyboard=True)
    kb.add("Ğ¢ÑƒÑ€Ğ¸Ğ·Ğ¼", "Ğ­ĞºĞ¾Ğ»Ğ¾Ğ³Ğ¸Ñ")
    kb.add("ĞœĞµĞ´Ğ¸Ñ†Ğ¸Ğ½Ğ°", "Ğ¡Ğ¾Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑÑ„ĞµÑ€Ğ°")
    kb.add("â¬…ï¸ ĞĞ°Ğ·Ğ°Ğ´ Ğº ÑÑ‚Ñ€Ğ°Ğ½Ğ°Ğ¼")
    return kb

def taxes_keyboard(country, sector):
    kb = types.ReplyKeyboardMarkup(resize_keyboard=True)
    taxes = list(tax_data[country][sector].keys())
    random.shuffle(taxes)
    kb.add(taxes[0], taxes[1])
    kb.add(taxes[2], taxes[3])
    kb.add("â¬…ï¸ ĞĞ°Ğ·Ğ°Ğ´ Ğº ÑÑ„ĞµÑ€Ğ°Ğ¼")
    return kb

# Ğ¥ÑĞ½Ğ´Ğ»ĞµÑ€Ñ‹
@dp.message_handler(commands=["start"])
async def start(message: types.Message):
    uid = message.from_user.id
    user_scores[uid] = 0
    user_state[uid] = {}
    await message.answer(
        "ğŸŒ Ğ˜Ğ³Ñ€Ğ° Â«ĞĞµĞ¾Ğ±Ñ‹Ñ‡Ğ½Ñ‹Ğµ Ğ½Ğ°Ğ»Ğ¾Ğ³Ğ¸ Ğ¼Ğ¸Ñ€Ğ°Â»!\n"
        "Ğ’Ñ‹Ğ±Ğ¸Ñ€Ğ°Ğ¹ ÑÑ‚Ñ€Ğ°Ğ½Ñƒ â†’ ÑÑ„ĞµÑ€Ñƒ â†’ Ğ½Ğ°Ğ»Ğ¾Ğ³.\n"
        "ğŸ 50 Ğ±Ğ°Ğ»Ğ»Ğ¾Ğ² = Ğ±Ğ¾Ğ½ÑƒÑÑ‹!",
        reply_markup=countries_keyboard()
    )

@dp.message_handler(lambda m: m.text == "ğŸ“Š ĞœĞ¾Ğ¸ Ğ±Ğ°Ğ»Ğ»Ñ‹")
async def my_score(message: types.Message):
    uid = message.from_user.id
    await message.answer(f"ğŸ“Š Ğ’Ğ°ÑˆĞ¸ Ğ±Ğ°Ğ»Ğ»Ñ‹: {user_scores.get(uid, 0)}", reply_markup=countries_keyboard())

@dp.message_handler(lambda m: m.text in tax_data.keys())
async def choose_sector(message: types.Message):
    uid = message.from_user.id
    user_state[uid] = {"country": message.text}
    await message.answer("Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑÑ„ĞµÑ€Ñƒ:", reply_markup=sectors_keyboard())

@dp.message_handler(lambda m: m.text == "â¬…ï¸ ĞĞ°Ğ·Ğ°Ğ´ Ğº ÑÑ‚Ñ€Ğ°Ğ½Ğ°Ğ¼")
async def back_to_countries(message: types.Message):
    await message.answer("Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑÑ‚Ñ€Ğ°Ğ½Ñƒ:", reply_markup=countries_keyboard())

@dp.message_handler(lambda m: m.text in ["Ğ¢ÑƒÑ€Ğ¸Ğ·Ğ¼", "Ğ­ĞºĞ¾Ğ»Ğ¾Ğ³Ğ¸Ñ", "ĞœĞµĞ´Ğ¸Ñ†Ğ¸Ğ½Ğ°", "Ğ¡Ğ¾Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑÑ„ĞµÑ€Ğ°"])
async def choose_tax(message: types.Message):
    uid = message.from_user.id
    if uid not in user_state or "country" not in user_state[uid]:
        await message.answer("Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑÑ‚Ñ€Ğ°Ğ½Ñƒ.", reply_markup=countries_keyboard())
        return
    user_state[uid]["sector"] = message.text
    country = user_state[uid]["country"]
    sector = user_state[uid]["sector"]
    await message.answer("Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ½Ğ°Ğ»Ğ¾Ğ³:", reply_markup=taxes_keyboard(country, sector))

@dp.message_handler(lambda m: m.text == "â¬…ï¸ ĞĞ°Ğ·Ğ°Ğ´ Ğº ÑÑ„ĞµÑ€Ğ°Ğ¼")
async def back_to_sectors(message: types.Message):
    uid = message.from_user.id
    if uid not in user_state or "country" not in user_state[uid]:
        await message.answer("Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑÑ‚Ñ€Ğ°Ğ½Ñƒ:", reply_markup=countries_keyboard())
        return
    await message.answer("Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑÑ„ĞµÑ€Ñƒ:", reply_markup=sectors_keyboard())

@dp.message_handler(lambda m: True)
async def handle_tax(message: types.Message):
    uid = message.from_user.id
    if uid not in user_state or "country" not in user_state[uid] or "sector" not in user_state[uid]:
        await message.answer("Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑÑ‚Ñ€Ğ°Ğ½Ñƒ Ğ¸ ÑÑ„ĞµÑ€Ñƒ.", reply_markup=countries_keyboard())
        return
    country = user_state[uid]["country"]
    sector = user_state[uid]["sector"]

    if message.text not in tax_data[country][sector]:
        await message.answer("Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ½Ğ°Ğ»Ğ¾Ğ³ Ñ ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº.", reply_markup=taxes_keyboard(country, sector))
        return

    points = tax_data[country][sector][message.text]
    user_scores[uid] += points
    remaining = max(0, 50 - user_scores[uid])

    text = (
        f"âœ… Ğ’Ñ‹ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ»Ğ¸:\n{message.text}\n\n"
        f"ğŸ¯ Ğ‘Ğ°Ğ»Ğ»Ñ‹ Ğ·Ğ° ÑÑ‚Ğ¾Ñ‚ Ğ½Ğ°Ğ»Ğ¾Ğ³: {points}\n"
        f"ğŸ“Š Ğ’ÑĞµĞ³Ğ¾ Ğ±Ğ°Ğ»Ğ»Ğ¾Ğ²: {user_scores[uid]}\n"
        f"â³ ĞÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ Ğ´Ğ¾ Ğ±Ğ¾Ğ½ÑƒÑĞ°: {remaining}"
    )

    if user_scores[uid] >= 50:
        text += "\n\nğŸ Ğ‘Ğ¾Ğ½ÑƒÑÑ‹ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ñ‹:\n" + "\n".join(bonus_codes)

    await message.answer(text, reply_markup=countries_keyboard())

if __name__ == "__main__":
    executor.start_polling(dp)
